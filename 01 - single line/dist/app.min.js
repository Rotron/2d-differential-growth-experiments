"use strict";function _slicedToArray(i,t){return _arrayWithHoles(i)||_iterableToArrayLimit(i,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(i,t){var e=[],n=!0,o=!1,s=void 0;try{for(var r,a=i[Symbol.iterator]();!(n=(r=a.next()).done)&&(e.push(r.value),!t||e.length!==t);n=!0);}catch(i){o=!0,s=i}finally{try{n||null==a.return||a.return()}finally{if(o)throw s}}return e}function _arrayWithHoles(i){if(Array.isArray(i))return i}function _classCallCheck(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(i,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}function _createClass(i,t,e){return t&&_defineProperties(i.prototype,t),e&&_defineProperties(i,e),i}var path,Node=function(){function s(i,t,e,n){var o=4<arguments.length&&void 0!==arguments[4]&&arguments[4];_classCallCheck(this,s),this.position=i,this.currentPosition=i,this.minDistance=t,this.maxDistance=e,this.repulsionRadius=n,this.isFixed=o}return _createClass(s,[{key:"draw",value:function(){ellipse(this.position.x,this.position.y,5)}}]),s}(),Path=function(){function e(i){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];_classCallCheck(this,e),this.nodes=i,this.closed=t}return _createClass(e,[{key:"isClosed",value:function(){this.closed=!0}},{key:"isOpen",value:function(){this.closed=!1}},{key:"iterate",value:function(){var i=!0,t=!1,e=void 0;try{for(var n,o=this.nodes.entries()[Symbol.iterator]();!(i=(n=o.next()).done);i=!0){var s=_slicedToArray(n.value,2),r=s[0];s[1];this.applyAttraction(r)}}catch(i){t=!0,e=i}finally{try{i||null==o.return||o.return()}finally{if(t)throw e}}this.splitEdges()}},{key:"applyAttraction",value:function(i){0<=i-1&&min(this.nodes[i-1].minDistance,this.nodes[i].minDistance)<this.nodes[i].position.dist(this.nodes[i-1].position)&&!this.nodes[i].isFixed&&(this.nodes[i].position=p5.Vector.lerp(this.nodes[i].position,this.nodes[i-1].position,.25)),i+1<this.nodes.length&&min(this.nodes[i].minDistance,this.nodes[i+1].minDistance)<this.nodes[i].position.dist(this.nodes[i+1].position)&&!this.nodes[i].isFixed&&(this.nodes[i].position=p5.Vector.lerp(this.nodes[i].position,this.nodes[i+1].position,.25))}},{key:"applyRepulsion",value:function(i){var t=!0,e=!1,n=void 0;try{for(var o,s=this.nodes[Symbol.iterator]();!(t=(o=s.next()).done);t=!0){var r=o.value,a=min(this.nodes[i].repulsionRadius,r.repulsionRadius);this.nodes[i].position.dist(r.position)<=a&&!this.nodes[i].isFixed&&this.nodes[i].position.mult(1.001)}}catch(i){e=!0,n=i}finally{try{t||null==s.return||s.return()}finally{if(e)throw n}}}},{key:"applyAlignment",value:function(i){}},{key:"splitEdges",value:function(){var i=!0,t=!1,e=void 0;try{for(var n,o=this.nodes.entries()[Symbol.iterator]();!(i=(n=o.next()).done);i=!0){var s=_slicedToArray(n.value,2),r=s[0];s[1];if(r+1<this.nodes.length){var a=min(this.nodes[r].maxDistance,this.nodes[r+1].maxDistance);if(this.nodes[r].position.dist(this.nodes[r+1].position)>a){var l=new Node(p5.Vector.lerp(this.nodes[r].position,this.nodes[r+1].position,.5),MIN_DISTANCE,MAX_DISTANCE,REPULSION_RADIUS);this.nodes.splice(r+1,0,l)}}}}catch(i){t=!0,e=i}finally{try{i||null==o.return||o.return()}finally{if(t)throw e}}}},{key:"injectNode",value:function(){var i=parseInt(random(0,this.nodes.length)),t=i+1;if(i!=this.nodes.length-1||this.closed){i==this.nodes.length&&this.closed&&(t=0);var e=new Node(p5.Vector.lerp(this.nodes[i].position,this.nodes[t].position,.5).add(createVector(0,random(5,100))),MIN_DISTANCE,MAX_DISTANCE,REPULSION_RADIUS);this.nodes.splice(i,0,e)}}},{key:"draw",value:function(){fill(0),noStroke();var i=!0,t=!1,e=void 0;try{for(var n,o=this.nodes[Symbol.iterator]();!(i=(n=o.next()).done);i=!0){n.value.draw()}}catch(i){t=!0,e=i}finally{try{i||null==o.return||o.return()}finally{if(t)throw e}}stroke(0);for(var s=0;s<this.nodes.length-1;s++)line(this.nodes[s].position.x,this.nodes[s].position.y,this.nodes[s+1].position.x,this.nodes[s+1].position.y);this.closed&&line(this.nodes[this.nodes.length-1].position.x,this.nodes[this.nodes.length-1].position.y,this.nodes[0].position.x,this.nodes[0].position.y)}}]),e}(),MIN_DISTANCE=100,MAX_DISTANCE=200,REPULSION_RADIUS=200;function setup(){createCanvas(window.innerWidth,window.innerHeight),frameRate(1);var i=[new Node(createVector(window.innerWidth/2-200,window.innerHeight/2),MIN_DISTANCE,MAX_DISTANCE,REPULSION_RADIUS,!0),new Node(createVector(window.innerWidth/2+200,window.innerHeight/2),MIN_DISTANCE,MAX_DISTANCE,REPULSION_RADIUS,!0)];path=new Path(i)}function draw(){background(250),path.iterate(),path.draw()}